/[ \t]/ { /* skip */ }
/\n/ { outputStream.TrimSpace(); outputStream.Output(0, "\n");outputStream.SetNewLineFlag(); return NR }

/def|new|if|else|sh|echo|import|agent|label|script|environment|stage|node|dir|any|none/ {
  m := map[string]int{
    "def" : DEF,
    "new" : NEW,
    "if" : IF,
    "else" : ELSE,
    "sh" : SH,
    "echo": ECHO,
    "import": IMPORT,
    "agent": AGENT,
    "label": LABEL,
    "script": SCRIPT,
    "environment": ENVIRONMENT,
    "stage": STAGE,
    "node": NODE,
    "dir": DIR,
    "any": ANY,
    "none": NONE,
  }
  outputStream.Output(lval.indent_level,yylex.Text()," "); return m[yylex.Text()]
}

/==|!=|>=|<=|\|\||&&/ {
  m := map[string]int{
    "==" : EQ,
    "!=" : NE,
    ">=" : GE,
    "<=" : LE,
    "||" : OR,
    "&&" : AND,
  }
  outputStream.Output(lval.indent_level,yylex.Text()," "); return m[yylex.Text()]
}

/{/ { lval.indent_level++; outputStream.Output(lval.indent_level,yylex.Text()," "); return int(yylex.Text()[0]) }
/}/ { lval.indent_level--; outputStream.Output(lval.indent_level,yylex.Text()," "); return int(yylex.Text()[0]) }

/[;{}=+%\/\-]|<|>/ { outputStream.Output(lval.indent_level, yylex.Text()," "); return int(yylex.Text()[0]) }
/[(.]|\[/ {
  c := yylex.Text()[0]
  if c == '(' || c=='[' {
    lval.indent_level++
  }
  outputStream.TrimSpace(); outputStream.Output(lval.indent_level, yylex.Text())
  return int(c)
}
/[:,]|\)|\]/ {
  c := yylex.Text()[0]
  if c == ')' || c == ']' {
    lval.indent_level--
  }
  outputStream.TrimSpace(); outputStream.Output(lval.indent_level, yylex.Text(), " ")
  return int(yylex.Text()[0])
}

/[a-zA-Z0-9$_]+/ { outputStream.Output(lval.indent_level, yylex.Text()," "); lval.str = yylex.Text(); return IDENT }

/\/\/[^\n]*\n/ { outputStream.Output(lval.indent_level, yylex.Text()); outputStream.SetNewLineFlag(); return NR }
/\/\*([^\/]|[^*]\/)*\*\// { outputStream.Output(lval.indent_level, yylex.Text()) }

/'''([^']|'[^']|''[^'])*'''/ { outputStream.Output(lval.indent_level, yylex.Text()," "); lval.str = yylex.Text(); return STRING }
/"""([^"]|"[^"]|""[^"])*"""/ { outputStream.Output(lval.indent_level, yylex.Text()," "); lval.str = yylex.Text(); return STRING }
/'[^']*'/ { outputStream.Output(lval.indent_level, yylex.Text()," "); return STRING }
/"([^"]|\\[^"])*"/ { outputStream.Output(lval.indent_level, yylex.Text()," "); return STRING }

//
/* NOTE: high priority */
/* NOTE: low priority */
package main
import (
)
